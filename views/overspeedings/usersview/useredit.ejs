<% layout("/layouts/boilerplate") %>
<div class="container mt-5">
    <h2>Edit User Details</h2>

    <form method="POST" action="/admin/users/<%= listing._id %>?_method=PUT">
        <div class="mb-3">
            <label for="name" class="form-label">Name:</label>
            <input 
                type="text" 
                class="form-control" 
                id="name" 
                name="user[name]" 
                value="<%= listing.name %>" 
                required>
        </div>

        <div class="mb-3">
            <label for="username" class="form-label">Username:</label>
            <input 
                type="text" 
                class="form-control" 
                id="username" 
                name="user[username]" 
                value="<%= listing.username %>" 
                required>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input 
                type="email" 
                class="form-control" 
                id="email" 
                name="user[email]" 
                value="<%= listing.email %>" 
                required>
        </div>

        <div class="mb-3">
            <label for="role" class="form-label">Role:</label>
            <select class="form-select" id="role" name="user[role]" required>
                <option value="admin" <%= listing.role === 'admin' ? 'selected' : '' %>>Admin</option>
                <option value="user" <%= listing.role === 'user' ? 'selected' : '' %>>User</option>
                <option value="anonymous" <%= listing.role === 'anonymous' ? 'selected' : '' %>>Anonymous</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="numberPlate" class="form-label">Number Plate(s):</label>
            <input 
                type="text" 
                class="form-control" 
                id="numberPlate" 
                name="user[number_plate]" 
                value="<%= listing.number_plate.join(', ') %>" 
                placeholder="Enter comma-separated number plates" 
                required>
        </div>

        <div class="mb-3">
            <label for="totalFines" class="form-label">Total Unpaid Fines:</label>
            <input 
                type="number" 
                class="form-control" 
                id="totalFines" 
                name="user[total_unpaid_fines]" 
                value="<%= listing.total_unpaid_fines %>" 
                min="0" 
                required>
        </div>

        <div class="text-end">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="/admin/users" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
    